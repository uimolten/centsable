(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1373:(e,s,a)=>{"use strict";a.d(s,{E:()=>l});var t=a(64827),r=a(95155);function l(e){let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,t.cn)("animate-pulse rounded-md bg-muted",s),...a})}},6611:(e,s,a)=>{"use strict";a.d(s,{BK:()=>d,eu:()=>n,q5:()=>c});var t=a(12115),r=a(41940),l=a(64827),i=a(95155);let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.bL,{ref:s,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t})});n.displayName=r.bL.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r._V,{ref:s,className:(0,l.cn)("aspect-square h-full w-full",a),...t})});d.displayName=r._V.displayName;let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.H4,{ref:s,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t})});c.displayName=r.H4.displayName},11043:(e,s,a)=>{"use strict";a.d(s,{r:()=>r});var t=a(45320);let r=(0,t.createServerReference)("40a64fef1ebce5832e2be945db9016374366960e6f",t.callServer,void 0,t.findSourceMapURL,"updateQuestProgress")},46325:(e,s,a)=>{"use strict";a.d(s,{Bc:()=>n,ZI:()=>o,k$:()=>c,m_:()=>d});var t=a(12115),r=a(14017),l=a(64827),i=a(95155);let n=r.Kq,d=r.bL,c=r.l9,o=t.forwardRef((e,s)=>{let{className:a,sideOffset:t=4,...n}=e;return(0,i.jsx)(r.UC,{ref:s,sideOffset:t,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});o.displayName=r.UC.displayName},60190:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>i,aR:()=>n,wL:()=>u});var t=a(12115),r=a(64827),l=a(95155);let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});i.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,l.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...t})});u.displayName="CardFooter"},68154:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var t=a(48335),r=a(6066),l=a(12115),i=a(1373),n=a(6611),d=a(22444),c=a(99728),o=a(82523),u=a(59546),m=a(65719),f=a(63240),x=a(45320);let h=(0,x.createServerReference)("408da7d1b8f7771d05f323ee125acea1d84bdb306f",x.callServer,void 0,x.findSourceMapURL,"updateUsername");var p=a(11043),v=a(90138),g=a(95155);function j(e){var s,a,r;let{user:i,onUpdateUser:x,xpInCurrentLevel:j,xpToNextLevel:b,progressPercentage:N}=e,{refreshUserData:w}=(0,t.A)(),[y,C]=(0,l.useState)(!1),[k,A]=(0,l.useState)(null!=(s=i.displayName)?s:""),[R,E]=(0,l.useState)(!1),{toast:S}=(0,f.dj)();(0,l.useEffect)(()=>{var e;A(null!=(e=i.displayName)?e:"")},[i.displayName]);let T=async()=>{if(i){if(k.trim().length<3)return void S({variant:"destructive",title:"Username too short",description:"Your username must be at least 3 characters long."});if(k===i.displayName)return void C(!1);E(!0);try{let e=await h({userId:i.uid,newUsername:k});e.success?(await x(),await (0,p.r)({userId:i.uid,actionType:"update_profile"}),await (null==w?void 0:w()),S({title:"Username updated successfully!"}),C(!1)):S({variant:"destructive",title:"Update failed",description:e.message||"That username is not appropriate."})}catch(e){S({variant:"destructive",title:"An error occurred",description:"Could not update username. Please try again."})}finally{E(!1)}}};return(0,g.jsxs)(m.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col items-center text-center gap-4 p-8 bg-card/30 backdrop-blur-lg border border-border/10 rounded-2xl",children:[(0,g.jsx)("div",{className:"relative",children:(0,g.jsxs)(n.eu,{className:"h-32 w-32 mb-4 border-4 border-primary shadow-glow",children:[(0,g.jsx)(n.BK,{src:null!=(a=i.photoURL)?a:"",alt:null!=(r=i.displayName)?r:"User"}),(0,g.jsx)(n.q5,{className:"text-4xl bg-muted",children:(0,g.jsx)(v.g,{className:"scale-150"})})]})}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[y?(0,g.jsx)(c.p,{value:k,onChange:e=>A(e.target.value),className:"text-4xl font-bold font-headline h-auto bg-background/50 text-center",disabled:R}):(0,g.jsx)("h1",{className:"text-4xl font-bold font-headline",children:k||i.email}),y?(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)(d.$,{size:"sm",onClick:T,disabled:R,children:R?(0,g.jsx)(o.A,{className:"animate-spin"}):"Save"}),(0,g.jsx)(d.$,{size:"sm",variant:"ghost",onClick:()=>{var e;A(null!=(e=i.displayName)?e:""),C(!1)},disabled:R,children:"Cancel"})]}):(0,g.jsx)(d.$,{variant:"ghost",size:"icon",onClick:()=>{C(!0)},className:"rounded-full",children:(0,g.jsx)(u.A,{className:"h-5 w-5"})})]}),(0,g.jsxs)("div",{className:"w-full max-w-md",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center text-sm font-semibold text-muted-foreground mb-1",children:[(0,g.jsxs)("span",{children:["Level ",i.level]}),(0,g.jsxs)("span",{children:[j," / ",b," XP"]})]}),(0,g.jsx)("div",{className:"relative h-4 rounded-full bg-muted/30",children:(0,g.jsx)("div",{className:"absolute inset-0 h-full w-full overflow-hidden rounded-full",children:(0,g.jsx)(m.P.div,{className:"h-full bg-gradient-to-r from-primary to-green-400",initial:{width:0},animate:{width:"".concat(N,"%")},transition:{duration:1,ease:"easeOut"},style:{boxShadow:"0 0 10px 1px hsl(var(--primary) / 0.7)"}})})})]})]})}var b=a(60190);function N(e){let{icon:s,value:a,label:t}=e;return(0,g.jsx)(m.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},whileHover:{y:-5},children:(0,g.jsxs)(b.Zp,{className:"bg-card/30 backdrop-blur-lg border border-border/10 text-center transition-all hover:border-primary/50",children:[(0,g.jsxs)(b.aR,{className:"flex flex-col items-center justify-center pb-2",children:[(0,g.jsx)("div",{className:"p-3 rounded-full bg-primary/20 text-primary mb-2",children:(0,g.jsx)(s,{className:"h-8 w-8"})}),(0,g.jsx)(b.ZB,{className:"text-4xl font-black font-headline",children:a})]}),(0,g.jsx)(b.Wu,{children:(0,g.jsx)("p",{className:"text-muted-foreground font-semibold",children:t})})]})})}var w=a(46325),y=a(80939),C=a(31261),k=a(68253),A=a(73024),R=a(52164),E=a(64827);let S=[{id:"savings-starter",name:"Savings Starter",description:"Awarded for completing the Savings Unit.",icon:y.A},{id:"investing-novice",name:"Investing Novice",description:"Awarded for completing the Investing Unit.",icon:C.A},{id:"streak-7",name:"7-Day Streak",description:"Awarded for logging in for 7 consecutive days.",icon:k.A},{id:"first-investment",name:"First Investment",description:"Awarded after making your first simulated investment.",icon:A.A}];function T(e){let{earnedAchievements:s}=e,a={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return(0,g.jsxs)(m.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},children:[(0,g.jsx)("h2",{className:"text-3xl font-bold font-headline mb-6",children:"Your Achievements"}),(0,g.jsx)(w.Bc,{children:(0,g.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6",children:S.map(e=>{let t=s.includes(e.id),r=e.icon;return(0,g.jsx)(m.P.div,{variants:a,children:(0,g.jsxs)(w.m_,{children:[(0,g.jsx)(w.k$,{asChild:!0,children:(0,g.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,g.jsx)("div",{className:(0,E.cn)("flex items-center justify-center w-24 h-24 rounded-full border-4 transition-all duration-300",t?"bg-yellow-400/20 border-yellow-400 text-yellow-300 shadow-glow":"bg-muted/30 border-border/20 text-muted-foreground"),children:t?(0,g.jsx)(r,{className:"h-12 w-12"}):(0,g.jsx)(R.A,{className:"h-12 w-12"})}),(0,g.jsx)("p",{className:(0,E.cn)("font-semibold text-center",!t&&"text-muted-foreground"),children:e.name})]})}),(0,g.jsx)(w.ZI,{className:"bg-card/80 backdrop-blur-md border-border/20",children:(0,g.jsx)("p",{children:e.description})})]})},e.id)})})})]})}var U=a(98821),P=a(59191),L=a(14195),B=a(74912);function Z(e){let{user:s}=e,{signOut:a}=(0,t.A)(),{toast:r}=(0,f.dj)(),[i,n]=(0,l.useState)(!1),c=async()=>{n(!0);try{await (0,U.J1)(P.j2,s.email),r({title:"Password Reset Email Sent",description:"Check your inbox for instructions to reset your password."})}catch(e){r({variant:"destructive",title:"Error Sending Email",description:e.message})}finally{n(!1)}};return(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-3xl font-bold font-headline mb-6",children:"Account Settings"}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,g.jsxs)(b.Zp,{className:"bg-card/30 backdrop-blur-lg border-border/10",children:[(0,g.jsxs)(b.aR,{children:[(0,g.jsx)(b.ZB,{children:"Account Information"}),(0,g.jsx)(b.BT,{children:"Manage your account details and security."})]}),(0,g.jsxs)(b.Wu,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"text-muted-foreground",children:"Email"}),(0,g.jsx)("span",{className:"font-semibold",children:s.email})]}),(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"text-muted-foreground",children:"Password"}),(0,g.jsx)(d.$,{variant:"secondary",onClick:c,disabled:i,children:i?"Sending...":"Change Password"})]}),(0,g.jsx)(d.$,{variant:"outline",className:"w-full",onClick:()=>{a()},children:"Log Out"})]})]}),(0,g.jsxs)(b.Zp,{className:"bg-destructive/10 backdrop-blur-lg border-destructive/50",children:[(0,g.jsxs)(b.aR,{children:[(0,g.jsx)(b.ZB,{children:"Danger Zone"}),(0,g.jsx)(b.BT,{children:"These actions are permanent and cannot be undone."})]}),(0,g.jsx)(b.Wu,{children:(0,g.jsxs)(L.Lt,{children:[(0,g.jsx)(L.tv,{asChild:!0,children:(0,g.jsx)(d.$,{variant:"destructive",className:"w-full",children:"Delete Account"})}),(0,g.jsxs)(L.EO,{children:[(0,g.jsxs)(L.wd,{children:[(0,g.jsx)(L.r7,{children:"Are you absolutely sure?"}),(0,g.jsx)(L.$v,{children:"This action cannot be undone. This will permanently delete your account and remove all of your progress from our servers."})]}),(0,g.jsxs)(L.ck,{children:[(0,g.jsx)(L.Zr,{children:"Cancel"}),(0,g.jsx)(L.Rx,{onClick:()=>{(0,B.zD)(),r({variant:"destructive",title:"Account Deletion Unavailable",description:"This feature is not yet implemented."})},className:"bg-destructive hover:bg-destructive/90",children:"Delete My Account"})]})]})]})})]})]})]})}var _=a(60462),I=a(77455),D=a(3130),$=a(72417);function z(){var e,s;let{user:a,userData:n,loading:d,refreshUserData:c}=(0,t.A)(),o=(0,r.useRouter)(),[u,m]=(0,l.useState)(n),[f,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{d||a||o.push("/auth")},[a,d,o]),(0,l.useEffect)(()=>{m(n),n&&x(!1)},[n]);let h=async()=>{await (null==c?void 0:c()),a&&(await (0,p.r)({userId:a.uid,actionType:"update_profile"}),await (null==c?void 0:c()))};if(d||f||!a||!u)return(0,g.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8 space-y-8",children:[(0,g.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,g.jsx)(i.E,{className:"h-32 w-32 rounded-full"}),(0,g.jsx)(i.E,{className:"h-10 w-64"}),(0,g.jsx)(i.E,{className:"h-6 w-32"}),(0,g.jsx)(i.E,{className:"h-4 w-full max-w-md"})]}),(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,g.jsx)(i.E,{className:"h-32 w-full rounded-lg"}),(0,g.jsx)(i.E,{className:"h-32 w-full rounded-lg"}),(0,g.jsx)(i.E,{className:"h-32 w-full rounded-lg"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)(i.E,{className:"h-8 w-48 mb-4"}),(0,g.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,g.jsx)(i.E,{className:"h-24 w-24 rounded-full"}),(0,g.jsx)(i.E,{className:"h-24 w-24 rounded-full"}),(0,g.jsx)(i.E,{className:"h-24 w-24 rounded-full"}),(0,g.jsx)(i.E,{className:"h-24 w-24 rounded-full"})]})]})]});let v=$.w.find(e=>e.level===u.level),b=$.w.find(e=>e.level===u.level+1),w=null!=(e=null==v?void 0:v.totalXPNeeded)?e:0,y=null!=(s=null==b?void 0:b.totalXPNeeded)?s:u.xp,C=u.xp-w,k=y-w;return(0,g.jsxs)("div",{className:"container mx-auto py-12 px-4 sm:px-6 lg:px-8 space-y-12",children:[(0,g.jsx)(j,{user:u,onUpdateUser:h,xpInCurrentLevel:C,xpToNextLevel:k,progressPercentage:k>0?C/k*100:100}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,g.jsx)(N,{icon:_.A,value:u.streak,label:"Day Streak"}),(0,g.jsx)(N,{icon:I.A,value:u.cents,label:"Cents Balance"}),(0,g.jsx)(N,{icon:D.A,value:u.lessonsCompleted,label:"Lessons Completed"})]}),(0,g.jsx)(T,{earnedAchievements:u.achievements}),(0,g.jsx)(Z,{user:u})]})}},74912:(e,s,a)=>{"use strict";function t(e,s,a,t){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;if(!window.AudioContext)return;let l=new(window.AudioContext||window.webkitAudioContext),i=l.createOscillator(),n=l.createGain();i.type=e,i.frequency.setValueAtTime(s,l.currentTime),i.frequency.exponentialRampToValueAtTime(a,l.currentTime+.7*t),n.gain.setValueAtTime(r,l.currentTime),n.gain.exponentialRampToValueAtTime(.001,l.currentTime+t),i.connect(n),n.connect(l.destination),i.start(l.currentTime),i.stop(l.currentTime+t)}function r(){t("sine",600,900,.2)}function l(){t("sawtooth",200,100,.3)}function i(){t("triangle",440,440,.05,.2)}a.d(s,{SX:()=>r,gX:()=>i,zD:()=>l})},90138:(e,s,a)=>{"use strict";a.d(s,{g:()=>n}),a(12115);var t=a(73329),r=a.n(t),l=a(35089),i=a(95155);function n(e){let{className:s,onClick:a}=e;return(0,i.jsxs)(r(),{href:"/",onClick:a,className:"flex items-center font-headline ".concat(s),children:[(0,i.jsx)(l.default,{src:"/images/centsable.svg",alt:"Centsable Logo",width:36,height:36,className:"mr-2",priority:!0}),(0,i.jsx)("span",{className:"text-2xl font-black text-foreground",children:"centsable"})]})}},93199:(e,s,a)=>{Promise.resolve().then(a.bind(a,68154))},99728:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(12115),r=a(64827),l=a(95155);let i=t.forwardRef((e,s)=>{let{className:a,type:t,...i}=e;return(0,l.jsx)("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...i})});i.displayName="Input"}},e=>{var s=s=>e(e.s=s);e.O(0,[992,138,240,719,89,329,812,17,973,560,441,891,358],()=>s(93199)),_N_E=e.O()}]);