"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{13577:(e,t,s)=>{s.d(t,{E:()=>o});var a=s(45320);let o=(0,a.createServerReference)("4000e9f0f12663c1b8f65caff9608509996008ed83",a.callServer,void 0,a.findSourceMapURL,"awardGameRewards")},22444:(e,t,s)=>{s.d(t,{$:()=>c,r:()=>l});var a=s(12115),o=s(59115),i=s(21335),r=s(64827),n=s(95155);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:i,asChild:c=!1,...d}=e,m=c?o.DX:"button";return(0,n.jsx)(m,{className:(0,r.cn)(l({variant:a,size:i,className:s})),ref:t,...d})});c.displayName="Button"},23652:(e,t,s)=>{s.d(t,{AuthProvider:()=>d,c:()=>c});var a=s(12115),o=s(98821),i=s(66446),r=s(59191),n=s(72417),l=s(95155);let c=(0,a.createContext)(void 0);function d(e){let{children:t}=e,[s,d]=(0,a.useState)(null),[m,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(!0),[x,f]=(0,a.useState)(null),[g,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=(0,o.hg)(r.j2,e=>{d(e),e||(u(null),h(!1))});return()=>e()},[]),(0,a.useEffect)(()=>{if(null==s?void 0:s.uid){h(!0);let e=(0,i.H9)(r.db,"users",s.uid),t=(0,i.aQ)(e,e=>{if(e.exists()){var t;let s=e.data(),a=(0,n.Z)(null!=(t=s.xp)?t:0);u(t=>{var o,i,r,n,l,c,d,m,u;return{...null!=t?t:{},uid:e.id,email:s.email,displayName:s.displayName||"New Adventurer",photoURL:s.photoURL,role:s.role||"user",xp:null!=(o=s.xp)?o:0,level:a,cents:null!=(i=s.cents)?i:0,streak:null!=(r=s.streak)?r:0,lessonsCompleted:null!=(n=s.lessonsCompleted)?n:0,achievements:null!=(l=s.achievements)?l:[],completedLessons:null!=(c=s.completedLessons)?c:[],lastQuestGenerated:s.lastQuestGenerated,createdAt:s.createdAt,dailyQuestsCompleted:null!=(d=s.dailyQuestsCompleted)&&d,dailyRewardClaims:null!=(m=s.dailyRewardClaims)?m:[],gameSummaries:null!=(u=s.gameSummaries)?u:{}}})}else u(null)},e=>{console.error("User document onSnapshot error:",e),u(null),h(!1)}),a=(0,i.P)((0,i.rJ)(r.db,"users",s.uid,"daily_quests"),(0,i.My)("assignedDate","desc")),o=(0,i.aQ)(a,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));u(e=>e?{...e,dailyQuests:t}:null),h(!1)},e=>{console.error("Quests subcollection onSnapshot error:",e),h(!1)});return()=>{t(),o()}}u(null),h(!1)},[s]);let y=async()=>{await (0,o.CI)(r.j2)},w=(0,a.useCallback)(async()=>m,[m]),j=(0,a.useMemo)(()=>(null==m?void 0:m.role)==="admin",[m]),b=(0,a.useCallback)(e=>{f(e)},[]),R=(0,a.useCallback)(()=>{f(null)},[]),S=(0,a.useCallback)(e=>{v(e),setTimeout(()=>{v(null)},4e3)},[]),N=(0,a.useMemo)(()=>({user:s,userData:m,loading:p,authLoading:p,signOut:y,refreshUserData:w,isAdmin:j,levelUpData:x,triggerLevelUp:b,closeLevelUpModal:R,rewardAnimationData:g,triggerRewardAnimation:S}),[s,m,p,j,x,g,w,b,R,S]);return(0,l.jsx)(c.Provider,{value:N,children:t})}},29889:(e,t,s)=>{s.d(t,{k:()=>n});var a=s(12115),o=s(75722),i=s(64827),r=s(95155);let n=a.forwardRef((e,t)=>{let{className:s,value:a,...n}=e;return(0,r.jsx)(o.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-muted",s),...n,children:(0,r.jsx)(o.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});n.displayName=o.bL.displayName},46766:(e,t,s)=>{s.d(t,{c:()=>o,s:()=>a});let a=2,o=[{id:1,name:"Sarah Chen",avatarUrl:"/images/avatars/avatar-1.png",loanRequest:{title:"Loan for a new laptop",amount:1200},creditScore:780,income:4e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:2,name:"Mike Rivera",avatarUrl:"/images/avatars/avatar-2.png",loanRequest:{title:"Used car financing",amount:8e3},creditScore:590,income:3e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:3,name:"Jessica Patel",avatarUrl:"/images/avatars/avatar-3.png",loanRequest:{title:"Emergency vet bill",amount:500},creditScore:680,income:3200,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:4,name:"David Kim",avatarUrl:"/images/avatars/avatar-4.png",loanRequest:{title:"Starting a small business",amount:15e3},creditScore:710,income:6e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:5,name:"Emily Garcia",avatarUrl:"/images/avatars/avatar-5.png",loanRequest:{title:"Funding a coding bootcamp",amount:1e4},creditScore:750,income:5500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:6,name:"Chris Nguyen",avatarUrl:"/images/avatars/avatar-6.png",loanRequest:{title:"Home renovation project",amount:2e4},creditScore:620,income:4500,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:7,name:"Olivia Martinez",avatarUrl:"/images/avatars/avatar-7.png",loanRequest:{title:"Consolidating credit card debt",amount:5e3},creditScore:660,income:3800,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:8,name:"Alex Johnson",avatarUrl:"/images/avatars/avatar-8.png",loanRequest:{title:"New furniture for apartment",amount:2500},creditScore:810,income:7e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:9,name:"Tyrone McCaffery",avatarUrl:"/images/avatars/avatar-9.png",loanRequest:{title:"Loan for a Hellcat",amount:6e4},creditScore:450,income:2500,dti:"High",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Income is too low for this loan","Loan amount is too high"],correctRejectionReason:"Credit Score is too low"},{id:10,name:"Fatima Al-Jamil",avatarUrl:"https://picsum.photos/seed/10/100/100",loanRequest:{title:"Culinary school tuition",amount:12e3},creditScore:720,income:4800,dti:"Medium",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:11,name:"Leo Tolstoy",avatarUrl:"https://picsum.photos/seed/11/100/100",loanRequest:{title:"Vintage motorcycle purchase",amount:7e3},creditScore:690,income:4200,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:12,name:"Isabella Rossi",avatarUrl:"https://picsum.photos/seed/12/100/100",loanRequest:{title:"Art supplies for gallery show",amount:3e3},creditScore:640,income:2800,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Income is too low"],correctRejectionReason:"Has a history of missed payments"},{id:13,name:"Ken Watanabe",avatarUrl:"https://picsum.photos/seed/13/100/100",loanRequest:{title:"Loan for custom-built PC",amount:4e3},creditScore:790,income:8e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:14,name:"Chloe Dubois",avatarUrl:"https://picsum.photos/seed/14/100/100",loanRequest:{title:"Funding for a photography project",amount:2e3},creditScore:700,income:3500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:15,name:"Jamal Williams",avatarUrl:"https://picsum.photos/seed/15/100/100",loanRequest:{title:"Loan for DJ equipment",amount:3500},creditScore:610,income:3300,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:16,name:"Nadia Petrov",avatarUrl:"https://picsum.photos/seed/16/100/100",loanRequest:{title:"Travel expenses for chess tournament",amount:1500},creditScore:760,income:5e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:17,name:"Sam O'Connell",avatarUrl:"https://picsum.photos/seed/17/100/100",loanRequest:{title:"Down payment for a tiny home",amount:25e3},creditScore:670,income:5200,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:18,name:"Priya Singh",avatarUrl:"https://picsum.photos/seed/18/100/100",loanRequest:{title:"Loan for a new smartphone",amount:1100},creditScore:730,income:4500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:19,name:"Jordan Miller",avatarUrl:"https://picsum.photos/seed/19/100/100",loanRequest:{title:"Loan for a new camera",amount:1800},creditScore:650,income:3e3,dti:"Medium",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:20,name:"Sofia Ivanova",avatarUrl:"https://picsum.photos/seed/20/100/100",loanRequest:{title:"Funding for a fashion startup",amount:15e3},creditScore:710,income:6e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:21,name:"Aiden McCarthy",avatarUrl:"https://picsum.photos/seed/21/100/100",loanRequest:{title:"Loan for a musical instrument",amount:2200},creditScore:740,income:4800,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:22,name:"Gabriela Silva",avatarUrl:"https://picsum.photos/seed/22/100/100",loanRequest:{title:"Loan for a pottery kiln",amount:4500},creditScore:680,income:4e3,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:23,name:"Liam Murphy",avatarUrl:"https://picsum.photos/seed/23/100/100",loanRequest:{title:"Loan for a new bicycle",amount:1300},creditScore:770,income:5500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:24,name:"Hana Tanaka",avatarUrl:"https://picsum.photos/seed/24/100/100",loanRequest:{title:"Loan for a gaming setup",amount:3e3},creditScore:630,income:3200,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:25,name:"Darius Washington",avatarUrl:"https://picsum.photos/seed/25/100/100",loanRequest:{title:"Loan for a new TV",amount:900},creditScore:790,income:6e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:26,name:"Ava Schmidt",avatarUrl:"https://picsum.photos/seed/26/100/100",loanRequest:{title:"Loan for a new couch",amount:1500},creditScore:690,income:4100,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:27,name:"Mateo Hernandez",avatarUrl:"https://picsum.photos/seed/27/100/100",loanRequest:{title:"Loan for a new guitar",amount:800},creditScore:720,income:3800,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""}]},48335:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(12115),o=s(23652);let i=()=>{let e=(0,a.useContext)(o.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},58624:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var a=s(12115),o=s(10624),i=s(65719),r=s(43826),n=s(40125),l=s.n(n),c=s(48335),d=s(13577),m=s(97809),u=s(67471),p=s(74912),h=s(63240),x=s(46766),f=s(39078),g=s(35089),v=s(60190),y=s(26617),w=s(28181),j=s(47412),b=s(22345),R=s(6191);s(20839);var S=s(95155);function N(e){var t,s;let{applicant:a,onSwipe:o,x:r}=e,n=(0,f.G)(r,[-200,200],[-20,20]),l=(0,f.G)(r,[50,150],[0,1]),c=(0,f.G)(r,[-50,-150],[0,1]),d=(t=a.creditScore)>=740?"#4ade80":t>=670?"#facc15":"#f87171";return(0,S.jsx)(i.P.div,{className:"absolute cursor-grab active:cursor-grabbing",style:{x:r,rotate:n},drag:"x",dragConstraints:{left:-300,right:300,top:0,bottom:0},onDragEnd:(e,t)=>{t.offset.x>100?o("right"):t.offset.x<-100&&o("left")},initial:{y:20,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{opacity:0,scale:.5,y:-20},transition:{duration:.3},children:(0,S.jsxs)(v.Zp,{className:"relative w-[350px] h-[500px] bg-card/60 backdrop-blur-xl border-2 border-border/20 shadow-2xl rounded-2xl p-6 flex flex-col justify-between overflow-hidden",children:[(0,S.jsx)(i.P.div,{style:{opacity:l},className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:(0,S.jsx)(g.default,{src:"/images/approved-stamp.png",width:300,height:300,alt:"Approved stamp"})}),(0,S.jsx)(i.P.div,{style:{opacity:c},className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:(0,S.jsx)(g.default,{src:"/images/denied-stamp.png",width:300,height:300,alt:"Denied stamp"})}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,S.jsx)(g.default,{src:a.avatarUrl,width:60,height:60,alt:a.name,className:"rounded-full border-2 border-primary","data-ai-hint":"person avatar"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"text-xl font-bold text-foreground",children:a.name}),(0,S.jsx)("p",{className:"text-sm text-muted-foreground",children:a.loanRequest.title})]})]}),(0,S.jsxs)("div",{className:"text-center mb-4",children:[(0,S.jsx)("p",{className:"text-lg text-muted-foreground",children:"Requesting"}),(0,S.jsxs)("p",{className:"text-4xl font-black text-primary",children:["$",a.loanRequest.amount.toLocaleString()]})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:[(0,S.jsx)("div",{className:"w-24 h-24 mx-auto",children:(0,S.jsx)(R.QF,{value:a.creditScore,minValue:300,maxValue:850,text:"".concat(a.creditScore),styles:(0,R.Hf)({pathColor:d,textColor:d,trailColor:"hsl(var(--muted) / 0.2)",textSize:"24px"})})}),(0,S.jsx)("p",{className:"mt-2 text-sm font-semibold text-muted-foreground",children:"Credit Score"})]}),(0,S.jsx)("div",{className:"space-y-3",children:(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50 flex flex-col items-center justify-center h-full",children:[(0,S.jsx)(y.A,{className:"w-6 h-6 text-primary mb-1"}),(0,S.jsxs)("p",{className:"text-lg font-bold",children:["$",a.income.toLocaleString(),"/mo"]}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Income"})]})}),(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:[(0,S.jsx)(w.A,{style:{color:"Low"===(s=a.dti)?"#4ade80":"Medium"===s?"#facc15":"#f87171"},className:"w-8 h-8 text-primary mx-auto mb-1"}),(0,S.jsx)("p",{className:"text-lg font-bold",children:a.dti}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Debt Level"})]}),(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:["On Time"===a.paymentHistory?(0,S.jsx)(j.A,{className:"w-8 h-8 text-green-400 mx-auto mb-1"}):(0,S.jsx)(b.A,{className:"w-8 h-8 text-red-400 mx-auto mb-1"}),(0,S.jsx)("p",{className:"text-lg font-bold",children:a.paymentHistory}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Payments"})]})]})]})})}var C=s(22444);function A(e){let{isOpen:t,reasons:s,onSelectReason:a,onClose:o}=e;if(!t)return null;let r=e=>{(0,p.gX)(),a(e)};return(0,S.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,S.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},children:(0,S.jsxs)(v.Zp,{className:"w-full max-w-md text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{children:"Justification Required"}),(0,S.jsx)(v.BT,{children:"What's the primary reason for this denial?"})]}),(0,S.jsx)(v.Wu,{className:"space-y-3",children:s.map(e=>(0,S.jsx)(C.$,{variant:"outline",className:"w-full text-base h-auto py-3 whitespace-normal",onClick:()=>r(e),children:e},e))})]})})})}var D=s(64827),L=s(11386),T=s(15890);function H(e){let{type:t,message:s}=e;return(0,S.jsxs)(i.P.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:(0,D.cn)("absolute bottom-4 left-1/2 -translate-x-1/2 w-auto max-w-md p-4 rounded-lg shadow-lg flex items-center gap-3 z-30","correct"===t?"bg-green-500/90 text-white":"bg-red-500/90 text-white"),children:["correct"===t?(0,S.jsx)(L.A,{className:"w-6 h-6"}):(0,S.jsx)(T.A,{className:"w-6 h-6"}),(0,S.jsx)("p",{className:"font-semibold",children:s})]})}var I=s(42179),k=s(96388),M=s(80939),O=s(80541),U=s(14632),q=s(60393),P=s(62401),_=s(46043),E=s(5883),z=s(65468),F=s(71737),G=s(15535),Z=s(29889);let B="America/Los_Angeles",Q=e=>{var t,s,a;let o=(null!=(t=e.hours)?t:0).toString().padStart(2,"0"),i=(null!=(s=e.minutes)?s:0).toString().padStart(2,"0"),r=(null!=(a=e.seconds)?a:0).toString().padStart(2,"0");return"".concat(o,":").concat(i,":").concat(r)},X=()=>{let{userData:e}=(0,c.A)(),[t,s]=(0,a.useState)(""),[o,i]=(0,a.useState)(x.s);return((0,a.useEffect)(()=>{var t;if(!e)return;let a=(null!=(t=e.dailyRewardClaims)?t:[]).map(e=>e.toDate()),o=(0,G.L_)(new Date,B),r=(0,P.o)(o);r.setHours(5),(0,_.Y)(o,r)&&(r=(0,E.e)(r,1));let n=a.filter(e=>(0,_.Y)(r,(0,G.L_)(e,B)));if(i(x.s-n.length),n.length>=x.s){let e=(0,P.o)(o);e.setHours(5),((0,_.Y)(e,o)||o.getTime()===e.getTime())&&(e=(0,z.f)(e,1));let t=()=>{let t=(0,G.L_)(new Date,B);(0,_.Y)(t,e)?s(Q((0,F.F)({start:t,end:e}))):(s(""),i(x.s),a&&clearInterval(a))};t();let a=setInterval(t,1e3);return()=>clearInterval(a)}s("")},[e]),o>0)?(0,S.jsxs)("div",{className:"flex items-center gap-3 text-green-400",children:[(0,S.jsx)(I.A,{className:"w-6 h-6"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Rewards Active:"})," ",o,"/",x.s," available"]})]}):(0,S.jsxs)("div",{className:"flex items-center gap-3 text-[#FFEEBC]",children:[(0,S.jsx)(k.A,{className:"w-6 h-6"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Next Reward In:"})," ",(0,S.jsx)("span",{className:"font-semibold",children:t})]})]})};function V(){let{user:e,userData:t,refreshUserData:s,triggerLevelUp:n,triggerRewardAnimation:f}=(0,c.A)(),{toast:g}=(0,h.dj)(),[y,w]=(0,a.useState)("start"),[R,D]=(0,a.useState)([]),[L,T]=(0,a.useState)(0),[I,P]=(0,a.useState)(0),[_,E]=(0,a.useState)(0),[z,F]=(0,a.useState)(null),[G,B]=(0,a.useState)(null),[Q,V]=(0,a.useState)(null),[W,J]=(0,a.useState)(null),[$,Y]=(0,a.useState)(null),[K,ee]=(0,a.useState)(null),et=(0,a.useRef)(null),es=(0,o.d)(0);(0,a.useEffect)(()=>{var e,s,a,o,i;let r=null==t||null==(e=t.gameSummaries)?void 0:e["credit-swipe"];r&&(E(null!=(a=null==(s=r.bestAttempt)?void 0:s.score)?a:0),V(null!=(o=r.lastAttempt)?o:null),J(null!=(i=r.bestAttempt)?i:null))},[t]);let ea=()=>{(0,p.gX)(),D(l()(x.c).slice(0,9)),T(0),P(0),F(null),w("playing"),Y(null),et.current=Date.now()},eo=(0,a.useCallback)(async()=>{w("game-over");let t=I>_;t&&E(I);let a={score:I,isNewHighScore:t,highScore:t?I:_};if(V(a),Y(a),ee("last"),null==e?void 0:e.uid){await (0,u.o)({userId:e.uid,gameId:"credit-swipe",summaryData:a});let o=await (0,d.E)({userId:e.uid,gameId:"credit-swipe",score:I});o.success?f({xp:o.xpAwarded,cents:o.centsAwarded}):g({variant:"default",title:"No Reward This Time",description:o.message});let i=[(0,m.r)({userId:e.uid,actionType:"play_minigame_round"})];t&&i.push((0,m.r)({userId:e.uid,actionType:"beat_high_score"})),await Promise.all(i);let r=await (null==s?void 0:s());(null==r?void 0:r.leveledUp)&&r.newLevel&&r.rewardCents&&n({newLevel:r.newLevel,reward:r.rewardCents})}},[I,_,e,s,n,f,g]),ei=(0,a.useCallback)(()=>{es.set(0),L<R.length-1?(T(e=>e+1),et.current=Date.now()):eo()},[L,R.length,eo,es]),er=(e,t,s)=>{var a;let o=s,i=t,r=(Date.now()-(null!=(a=et.current)?a:Date.now()))/1e3;e&&r<5&&(o+=25,i+=" Speed Bonus! +25"),P(e=>Math.max(0,e+o)),F({type:e?"correct":"incorrect",message:i}),e?(0,p.SX)():(0,p.zD)(),setTimeout(()=>{F(null),ei()},1500)},en=(0,a.useCallback)(e=>{if("playing"!==y||z)return;let t=R[L];"right"===e?"Approve"===t.decision?er(!0,"Correct! This applicant is a good risk.",150):er(!1,"Incorrect. This applicant has too many red flags.",-75):(B(t),w("awaiting-reason"))},[y,R,L,er,z]);if("game-over"===y&&$)return(0,S.jsxs)(v.Zp,{className:"bg-card/50 backdrop-blur-lg border-border/20 text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{className:"text-3xl font-bold",children:"Game Over!"}),(0,S.jsx)(v.BT,{className:"text-lg",children:"Here's your final score:"})]}),(0,S.jsxs)(v.Wu,{className:"space-y-6",children:[$.isNewHighScore&&"last"===K&&(0,S.jsx)(i.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"text-2xl font-bold text-yellow-400 p-3 bg-yellow-400/10 rounded-lg",children:"\uD83C\uDF89 New High Score! \uD83C\uDF89"}),(0,S.jsx)("div",{className:"text-6xl font-black text-primary",children:$.score}),(0,S.jsxs)("p",{className:"text-muted-foreground",children:["Your previous high score was ",_,"."]}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,S.jsx)(C.$,{size:"lg",className:"text-lg shadow-glow",onClick:ea,children:"Play Again"}),(0,S.jsx)(C.$,{size:"lg",variant:"outline",className:"text-lg",onClick:()=>{w("start"),Y(null),ee(null)},children:"Close Report"})]})]})]});if("start"===y)return(0,S.jsxs)(v.Zp,{className:"bg-card/50 backdrop-blur-lg border-border/20 text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{className:"text-3xl font-bold flex items-center justify-center gap-2",children:"Credit Swipe"}),(0,S.jsx)(v.BT,{className:"text-lg",children:"Can you make the right call? Swipe left to deny, right to approve."})]}),(0,S.jsxs)(v.Wu,{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"space-y-4 text-left p-4 bg-background/50 rounded-lg",children:[(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(j.A,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Approve Correctly:"})," +150 points"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(b.A,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Deny Correctly (with right reason):"})," +150 points"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(k.A,{className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Speed Bonus:"})," +25 points (correct decision in under 5s)"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(M.A,{className:"w-6 h-6 text-yellow-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"High Score:"})," ",_," points"]})]}),(0,S.jsx)(X,{})]}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,S.jsx)(C.$,{size:"lg",className:"w-full text-xl font-bold shadow-glow",onClick:ea,children:"Start Game"}),Q&&(0,S.jsxs)(C.$,{size:"lg",variant:"secondary",className:"w-full text-xl font-bold",onClick:()=>{Q&&(Y(Q),w("game-over"),ee("last"))},children:[(0,S.jsx)(O.A,{className:"mr-2"})," View Last Report"]})]})]})]});let el={initial:{opacity:0,x:0},animate:e=>({opacity:[0,.7,0],x:[0,5*e,10*e],transition:{delay:.1*e,duration:1.5,repeat:1/0,repeatType:"loop",ease:"easeInOut"}})},ec=R.length>0?(L+1)/R.length*100:0;return(0,S.jsxs)("div",{className:"w-full h-[700px] flex flex-col items-center justify-center relative",children:[(0,S.jsxs)("div",{className:"w-full max-w-sm mb-4",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,S.jsx)("span",{className:"text-sm font-semibold text-muted-foreground",children:"Progress"}),(0,S.jsxs)("span",{className:"text-sm font-bold text-foreground",children:["Applicant ",L+1," of ",R.length]})]}),(0,S.jsx)(Z.k,{value:ec,className:"h-3"})]}),(0,S.jsxs)("div",{className:"w-full h-[550px] flex items-center justify-center relative",children:[(0,S.jsx)("div",{className:"absolute left-0 flex items-center h-full pr-4 text-red-500/80",children:[0,1,2].map(e=>(0,S.jsx)(i.P.div,{custom:-1,variants:el,initial:"initial",animate:"animate",children:(0,S.jsx)(U.A,{className:"w-12 h-12"})},e))}),(0,S.jsx)("div",{className:"absolute right-0 flex items-center h-full pl-4 text-green-500/80",children:[0,1,2].map(e=>(0,S.jsx)(i.P.div,{custom:1,variants:el,initial:"initial",animate:"animate",children:(0,S.jsx)(q.A,{className:"w-12 h-12"})},e))}),(0,S.jsx)(r.N,{children:R.length>0&&L<R.length&&(0,S.jsx)(N,{applicant:R[L],onSwipe:en,x:es},R[L].id)})]}),(0,S.jsx)(r.N,{children:z&&(0,S.jsx)(H,{type:z.type,message:z.message})}),G&&(0,S.jsx)(A,{isOpen:"awaiting-reason"===y,reasons:G.rejectionReasons,onSelectReason:e=>{if(!G)return;let t=!1,s="",a=0;"Deny"===G.decision?e===G.correctRejectionReason?(t=!0,s="Correct! You spotted the main issue.",a=150):(t=!0,s="Good instinct, but the bigger issue was ".concat(G.correctRejectionReason.toLowerCase(),"."),a=25):(t=!1,s="Incorrect. This was a strong applicant who should have been approved.",a=-50),w("playing"),B(null),er(t,s,a)},onClose:()=>{w("playing"),B(null),ei()}})]})}},59191:(e,t,s)=>{s.d(t,{db:()=>l,j2:()=>n});var a=s(63892),o=s(98821),i=s(66446);let r=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyC8srmAJeGI69aQUDs0SoAe-350lnk17W4",authDomain:"centsable-2rix4.firebaseapp.com",projectId:"centsable-2rix4",storageBucket:"centsable-2rix4.firebasestorage.app",messagingSenderId:"954020441205",appId:"1:954020441205:web:84e2bc4684b2e87485dc3c",measurementId:"G-XS8FHQ20X4"}),n=(0,o.xI)(r),l=(0,i.aU)(r)},60190:(e,t,s)=>{s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>r,aR:()=>n,wL:()=>m});var a=s(12115),o=s(64827),i=s(95155);let r=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});r.displayName="Card";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s),...a})});n.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",s),...a})});d.displayName="CardContent";let m=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,i.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",s),...a})});m.displayName="CardFooter"},63240:(e,t,s)=>{s.d(t,{dj:()=>u});var a=s(12115);let o=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=n(c,e),l.forEach(e=>{e(c)})}function m(e){let{...t}=e,s=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},64827:(e,t,s)=>{s.d(t,{cn:()=>i,w:()=>r});var a=s(35403),o=s(59055);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.QP)((0,a.$)(t))}function r(e){return null==e||isNaN(e)?"0":e<1e3?Math.floor(e).toString():e>=1e3&&e<1e6?(Math.floor(e/1e3*10)/10).toFixed(1)+"K":e>=1e6&&e<1e9?(Math.floor(e/1e6*10)/10).toFixed(1)+"M":e>=1e9?(Math.floor(e/1e9*10)/10).toFixed(1)+"B":e.toString()}},67471:(e,t,s)=>{s.d(t,{o:()=>o});var a=s(45320);let o=(0,a.createServerReference)("40b7e9a415d87b5a5afc643a31d07d4e5b2ecfccf5",a.callServer,void 0,a.findSourceMapURL,"saveGameSummary")},72417:(e,t,s)=>{s.d(t,{Z:()=>o,w:()=>a});let a=(()=>{let e=[{level:1,totalXPNeeded:0,rewardCents:0}],t=0,s=250,a=0;for(let o=2;o<=50;o++){let i=t+s,r=2===o?50:a+10;e.push({level:o,totalXPNeeded:Math.floor(i),rewardCents:r}),t=i,s*=1.15,a=r}return e})(),o=e=>{for(let t=a.length-1;t>=0;t--)if(e>=a[t].totalXPNeeded)return a[t].level;return 1}},74912:(e,t,s)=>{function a(e,t,s,a){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;if(!window.AudioContext)return;let i=new(window.AudioContext||window.webkitAudioContext),r=i.createOscillator(),n=i.createGain();r.type=e,r.frequency.setValueAtTime(t,i.currentTime),r.frequency.exponentialRampToValueAtTime(s,i.currentTime+.7*a),n.gain.setValueAtTime(o,i.currentTime),n.gain.exponentialRampToValueAtTime(.001,i.currentTime+a),r.connect(n),n.connect(i.destination),r.start(i.currentTime),r.stop(i.currentTime+a)}function o(){a("sine",600,900,.2)}function i(){a("sawtooth",200,100,.3)}function r(){a("triangle",440,440,.05,.2)}s.d(t,{SX:()=>o,gX:()=>r,zD:()=>i})},97809:(e,t,s)=>{s.d(t,{r:()=>o});var a=s(45320);let o=(0,a.createServerReference)("40702cf51aabae2501ebb5377f32e24190fb8c1bee",a.callServer,void 0,a.findSourceMapURL,"updateQuestProgress")}}]);