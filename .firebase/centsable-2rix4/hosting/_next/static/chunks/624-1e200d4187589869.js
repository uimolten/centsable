"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{13577:(e,t,a)=>{a.d(t,{E:()=>s});var o=a(45320);let s=(0,o.createServerReference)("4000e9f0f12663c1b8f65caff9608509996008ed83",o.callServer,void 0,o.findSourceMapURL,"awardGameRewards")},22444:(e,t,a)=>{a.d(t,{$:()=>c,r:()=>l});var o=a(12115),s=a(59115),i=a(21335),r=a(64827),n=a(95155);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:a,variant:o,size:i,asChild:c=!1,...d}=e,m=c?s.DX:"button";return(0,n.jsx)(m,{className:(0,r.cn)(l({variant:o,size:i,className:a})),ref:t,...d})});c.displayName="Button"},23652:(e,t,a)=>{a.d(t,{AuthProvider:()=>d,c:()=>c});var o=a(12115),s=a(98821),i=a(66446),r=a(59191),n=a(72417),l=a(95155);let c=(0,o.createContext)(void 0);function d(e){let{children:t}=e,[a,d]=(0,o.useState)(null),[m,u]=(0,o.useState)(null),[p,h]=(0,o.useState)(!0),[x,g]=(0,o.useState)(null),[f,v]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=(0,s.hg)(r.j2,e=>{d(e),e||(u(null),h(!1))});return()=>e()},[]),(0,o.useEffect)(()=>{if(null==a?void 0:a.uid){h(!0);let e=(0,i.H9)(r.db,"users",a.uid),t=(0,i.aQ)(e,e=>{if(e.exists()){var t;let a=e.data(),o=(0,n.Z)(null!=(t=a.xp)?t:0);u(t=>{var s,i,r,n,l,c,d,m,u;return{...null!=t?t:{},uid:e.id,email:a.email,displayName:a.displayName||"New Adventurer",photoURL:a.photoURL,role:a.role||"user",xp:null!=(s=a.xp)?s:0,level:o,cents:null!=(i=a.cents)?i:0,streak:null!=(r=a.streak)?r:0,lessonsCompleted:null!=(n=a.lessonsCompleted)?n:0,achievements:null!=(l=a.achievements)?l:[],completedLessons:null!=(c=a.completedLessons)?c:[],lastQuestGenerated:a.lastQuestGenerated,createdAt:a.createdAt,dailyQuestsCompleted:null!=(d=a.dailyQuestsCompleted)&&d,dailyRewardClaims:null!=(m=a.dailyRewardClaims)?m:[],gameSummaries:null!=(u=a.gameSummaries)?u:{}}})}else u(null)},e=>{console.error("User document onSnapshot error:",e),u(null),h(!1)}),o=(0,i.P)((0,i.rJ)(r.db,"users",a.uid,"daily_quests"),(0,i.My)("assignedDate","desc")),s=(0,i.aQ)(o,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));u(e=>e?{...e,dailyQuests:t}:null),h(!1)},e=>{console.error("Quests subcollection onSnapshot error:",e),h(!1)});return()=>{t(),s()}}u(null),h(!1)},[a]);let y=async()=>{await (0,s.CI)(r.j2)},w=(0,o.useCallback)(async()=>m,[m]),j=(0,o.useMemo)(()=>(null==m?void 0:m.role)==="admin",[m]),b=(0,o.useCallback)(e=>{g(e)},[]),R=(0,o.useCallback)(()=>{g(null)},[]),S=(0,o.useCallback)(e=>{v(e),setTimeout(()=>{v(null)},4e3)},[]),N=(0,o.useMemo)(()=>({user:a,userData:m,loading:p,authLoading:p,signOut:y,refreshUserData:w,isAdmin:j,levelUpData:x,triggerLevelUp:b,closeLevelUpModal:R,rewardAnimationData:f,triggerRewardAnimation:S}),[a,m,p,j,x,f,w,b,R,S]);return(0,l.jsx)(c.Provider,{value:N,children:t})}},29889:(e,t,a)=>{a.d(t,{k:()=>n});var o=a(12115),s=a(75722),i=a(64827),r=a(95155);let n=o.forwardRef((e,t)=>{let{className:a,value:o,...n}=e;return(0,r.jsx)(s.bL,{ref:t,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-muted",a),...n,children:(0,r.jsx)(s.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(o||0),"%)")}})})});n.displayName=s.bL.displayName},46766:(e,t,a)=>{a.d(t,{c:()=>s,s:()=>o});let o=2,s=[{id:1,name:"Sarah Chen",avatarUrl:"images/avatars/avatar-1.png",loanRequest:{title:"Loan for a new laptop",amount:1200},creditScore:780,income:4e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:2,name:"Mike Rivera",avatarUrl:"images/avatars/avatar-2.png",loanRequest:{title:"Used car financing",amount:8e3},creditScore:590,income:3e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:3,name:"Jessica Patel",avatarUrl:"images/avatars/avatar-3.png",loanRequest:{title:"Emergency vet bill",amount:500},creditScore:680,income:3200,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:4,name:"David Kim",avatarUrl:"images/avatars/avatar-4.png",loanRequest:{title:"Starting a small business",amount:15e3},creditScore:710,income:6e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:5,name:"Emily Garcia",avatarUrl:"images/avatars/avatar-5.png",loanRequest:{title:"Funding a coding bootcamp",amount:1e4},creditScore:750,income:5500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:6,name:"Chris Nguyen",avatarUrl:"images/avatars/avatar-6.png",loanRequest:{title:"Home renovation project",amount:2e4},creditScore:620,income:4500,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:7,name:"Olivia Martinez",avatarUrl:"images/avatars/avatar-7.png",loanRequest:{title:"Consolidating credit card debt",amount:5e3},creditScore:660,income:3800,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:8,name:"Alex Johnson",avatarUrl:"images/avatars/avatar-8.png",loanRequest:{title:"New furniture for apartment",amount:2500},creditScore:810,income:7e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:9,name:"Tyrone McCaffery",avatarUrl:"images/avatars/avatar-9.png",loanRequest:{title:"Loan for a Hellcat",amount:6e4},creditScore:450,income:2500,dti:"High",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Income is too low for this loan","Loan amount is too high"],correctRejectionReason:"Credit Score is too low"},{id:10,name:"Fatima Al-Jamil",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Culinary school tuition",amount:12e3},creditScore:720,income:4800,dti:"Medium",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:11,name:"Leo Tolstoy",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Vintage motorcycle purchase",amount:7e3},creditScore:690,income:4200,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:12,name:"Isabella Rossi",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Art supplies for gallery show",amount:3e3},creditScore:640,income:2800,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Income is too low"],correctRejectionReason:"Has a history of missed payments"},{id:13,name:"Ken Watanabe",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for custom-built PC",amount:4e3},creditScore:790,income:8e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:14,name:"Chloe Dubois",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Funding for a photography project",amount:2e3},creditScore:700,income:3500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:15,name:"Jamal Williams",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for DJ equipment",amount:3500},creditScore:610,income:3300,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:16,name:"Nadia Petrov",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Travel expenses for chess tournament",amount:1500},creditScore:760,income:5e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:17,name:"Sam O'Connell",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Down payment for a tiny home",amount:25e3},creditScore:670,income:5200,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:18,name:"Priya Singh",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new smartphone",amount:1100},creditScore:730,income:4500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:19,name:"Jordan Miller",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new camera",amount:1800},creditScore:650,income:3e3,dti:"Medium",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:20,name:"Sofia Ivanova",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Funding for a fashion startup",amount:15e3},creditScore:710,income:6e3,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Debt Level is too high"},{id:21,name:"Aiden McCarthy",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a musical instrument",amount:2200},creditScore:740,income:4800,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:22,name:"Gabriela Silva",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a pottery kiln",amount:4500},creditScore:680,income:4e3,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:23,name:"Liam Murphy",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new bicycle",amount:1300},creditScore:770,income:5500,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:24,name:"Hana Tanaka",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a gaming setup",amount:3e3},creditScore:630,income:3200,dti:"High",paymentHistory:"On Time",decision:"Deny",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:"Credit Score is too low"},{id:25,name:"Darius Washington",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new TV",amount:900},creditScore:790,income:6e3,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""},{id:26,name:"Ava Schmidt",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new couch",amount:1500},creditScore:690,income:4100,dti:"Medium",paymentHistory:"Missed Payments",decision:"Deny",rejectionReasons:["Credit Score is too low","Has a history of missed payments","Debt Level is too high"],correctRejectionReason:"Has a history of missed payments"},{id:27,name:"Mateo Hernandez",avatarUrl:"https://placehold.co/100x100.png",loanRequest:{title:"Loan for a new guitar",amount:800},creditScore:720,income:3800,dti:"Low",paymentHistory:"On Time",decision:"Approve",rejectionReasons:["Credit Score is too low","Debt Level is too high","Income is too low"],correctRejectionReason:""}]},48335:(e,t,a)=>{a.d(t,{A:()=>i});var o=a(12115),s=a(23652);let i=()=>{let e=(0,o.useContext)(s.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},58624:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var o=a(12115),s=a(10624),i=a(65719),r=a(43826),n=a(40125),l=a.n(n),c=a(48335),d=a(13577),m=a(97809),u=a(67471),p=a(74912),h=a(63240),x=a(46766),g=a(39078),f=a(35089),v=a(60190),y=a(26617),w=a(28181),j=a(47412),b=a(22345),R=a(6191);a(20839);var S=a(95155);function N(e){var t,a;let{applicant:o,onSwipe:s,x:r}=e,n=(0,g.G)(r,[-200,200],[-20,20]),l=(0,g.G)(r,[50,150],[0,1]),c=(0,g.G)(r,[-50,-150],[0,1]),d=(t=o.creditScore)>=740?"#4ade80":t>=670?"#facc15":"#f87171";return(0,S.jsx)(i.P.div,{className:"absolute cursor-grab active:cursor-grabbing",style:{x:r,rotate:n},drag:"x",dragConstraints:{left:-300,right:300,top:0,bottom:0},onDragEnd:(e,t)=>{t.offset.x>100?s("right"):t.offset.x<-100&&s("left")},initial:{y:20,opacity:0,scale:.9},animate:{y:0,opacity:1,scale:1},exit:{opacity:0,scale:.5,y:-20},transition:{duration:.3},children:(0,S.jsxs)(v.Zp,{className:"relative w-[350px] h-[500px] bg-card/60 backdrop-blur-xl border-2 border-border/20 shadow-2xl rounded-2xl p-6 flex flex-col justify-between overflow-hidden",children:[(0,S.jsx)(i.P.div,{style:{opacity:l},className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:(0,S.jsx)(f.default,{src:"/images/approved-stamp.png",width:300,height:300,alt:"Approved stamp"})}),(0,S.jsx)(i.P.div,{style:{opacity:c},className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:(0,S.jsx)(f.default,{src:"/images/denied-stamp.png",width:300,height:300,alt:"Denied stamp"})}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,S.jsx)(f.default,{src:o.avatarUrl.replace(/^\//,""),width:60,height:60,alt:o.name,className:"rounded-full border-2 border-primary","data-ai-hint":"person avatar"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"text-xl font-bold text-foreground",children:o.name}),(0,S.jsx)("p",{className:"text-sm text-muted-foreground",children:o.loanRequest.title})]})]}),(0,S.jsxs)("div",{className:"text-center mb-4",children:[(0,S.jsx)("p",{className:"text-lg text-muted-foreground",children:"Requesting"}),(0,S.jsxs)("p",{className:"text-4xl font-black text-primary",children:["$",o.loanRequest.amount.toLocaleString()]})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:[(0,S.jsx)("div",{className:"w-24 h-24 mx-auto",children:(0,S.jsx)(R.QF,{value:o.creditScore,minValue:300,maxValue:850,text:"".concat(o.creditScore),styles:(0,R.Hf)({pathColor:d,textColor:d,trailColor:"hsl(var(--muted) / 0.2)",textSize:"24px"})})}),(0,S.jsx)("p",{className:"mt-2 text-sm font-semibold text-muted-foreground",children:"Credit Score"})]}),(0,S.jsx)("div",{className:"space-y-3",children:(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50 flex flex-col items-center justify-center h-full",children:[(0,S.jsx)(y.A,{className:"w-6 h-6 text-primary mb-1"}),(0,S.jsxs)("p",{className:"text-lg font-bold",children:["$",o.income.toLocaleString(),"/mo"]}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Income"})]})}),(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:[(0,S.jsx)(w.A,{style:{color:"Low"===(a=o.dti)?"#4ade80":"Medium"===a?"#facc15":"#f87171"},className:"w-8 h-8 text-primary mx-auto mb-1"}),(0,S.jsx)("p",{className:"text-lg font-bold",children:o.dti}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Debt Level"})]}),(0,S.jsxs)(v.Zp,{className:"p-3 bg-background/50",children:["On Time"===o.paymentHistory?(0,S.jsx)(j.A,{className:"w-8 h-8 text-green-400 mx-auto mb-1"}):(0,S.jsx)(b.A,{className:"w-8 h-8 text-red-400 mx-auto mb-1"}),(0,S.jsx)("p",{className:"text-lg font-bold",children:o.paymentHistory}),(0,S.jsx)("p",{className:"text-xs text-muted-foreground",children:"Payments"})]})]})]})})}var C=a(22444);function A(e){let{isOpen:t,reasons:a,onSelectReason:o,onClose:s}=e;if(!t)return null;let r=e=>{(0,p.gX)(),o(e)};return(0,S.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:(0,S.jsx)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.2},children:(0,S.jsxs)(v.Zp,{className:"w-full max-w-md text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{children:"Justification Required"}),(0,S.jsx)(v.BT,{children:"What's the primary reason for this denial?"})]}),(0,S.jsx)(v.Wu,{className:"space-y-3",children:a.map(e=>(0,S.jsx)(C.$,{variant:"outline",className:"w-full text-base h-auto py-3 whitespace-normal",onClick:()=>r(e),children:e},e))})]})})})}var D=a(64827),L=a(11386),T=a(15890);function H(e){let{type:t,message:a}=e;return(0,S.jsxs)(i.P.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:(0,D.cn)("absolute bottom-4 left-1/2 -translate-x-1/2 w-auto max-w-md p-4 rounded-lg shadow-lg flex items-center gap-3 z-30","correct"===t?"bg-green-500/90 text-white":"bg-red-500/90 text-white"),children:["correct"===t?(0,S.jsx)(L.A,{className:"w-6 h-6"}):(0,S.jsx)(T.A,{className:"w-6 h-6"}),(0,S.jsx)("p",{className:"font-semibold",children:a})]})}var I=a(42179),k=a(96388),M=a(80939),O=a(80541),U=a(14632),q=a(60393),P=a(62401),_=a(46043),E=a(5883),z=a(65468),F=a(71737),G=a(15535),Z=a(29889);let B="America/Los_Angeles",Q=e=>{var t,a,o;let s=(null!=(t=e.hours)?t:0).toString().padStart(2,"0"),i=(null!=(a=e.minutes)?a:0).toString().padStart(2,"0"),r=(null!=(o=e.seconds)?o:0).toString().padStart(2,"0");return"".concat(s,":").concat(i,":").concat(r)},X=()=>{let{userData:e}=(0,c.A)(),[t,a]=(0,o.useState)(""),[s,i]=(0,o.useState)(x.s);return((0,o.useEffect)(()=>{var t;if(!e)return;let o=(null!=(t=e.dailyRewardClaims)?t:[]).map(e=>e.toDate()),s=(0,G.L_)(new Date,B),r=(0,P.o)(s);r.setHours(5),(0,_.Y)(s,r)&&(r=(0,E.e)(r,1));let n=o.filter(e=>(0,_.Y)(r,(0,G.L_)(e,B)));if(i(x.s-n.length),n.length>=x.s){let e=(0,P.o)(s);e.setHours(5),((0,_.Y)(e,s)||s.getTime()===e.getTime())&&(e=(0,z.f)(e,1));let t=()=>{let t=(0,G.L_)(new Date,B);(0,_.Y)(t,e)?a(Q((0,F.F)({start:t,end:e}))):(a(""),i(x.s),o&&clearInterval(o))};t();let o=setInterval(t,1e3);return()=>clearInterval(o)}a("")},[e]),s>0)?(0,S.jsxs)("div",{className:"flex items-center gap-3 text-green-400",children:[(0,S.jsx)(I.A,{className:"w-6 h-6"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Rewards Active:"})," ",s,"/",x.s," available"]})]}):(0,S.jsxs)("div",{className:"flex items-center gap-3 text-[#FFEEBC]",children:[(0,S.jsx)(k.A,{className:"w-6 h-6"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Next Reward In:"})," ",(0,S.jsx)("span",{className:"font-semibold",children:t})]})]})};function V(){let{user:e,userData:t,refreshUserData:a,triggerLevelUp:n,triggerRewardAnimation:g}=(0,c.A)(),{toast:f}=(0,h.dj)(),[y,w]=(0,o.useState)("start"),[R,D]=(0,o.useState)([]),[L,T]=(0,o.useState)(0),[I,P]=(0,o.useState)(0),[_,E]=(0,o.useState)(0),[z,F]=(0,o.useState)(null),[G,B]=(0,o.useState)(null),[Q,V]=(0,o.useState)(null),[W,J]=(0,o.useState)(null),[$,Y]=(0,o.useState)(null),[K,ee]=(0,o.useState)(null),et=(0,o.useRef)(null),ea=(0,s.d)(0);(0,o.useEffect)(()=>{var e,a,o,s,i;let r=null==t||null==(e=t.gameSummaries)?void 0:e["credit-swipe"];r&&(E(null!=(o=null==(a=r.bestAttempt)?void 0:a.score)?o:0),V(null!=(s=r.lastAttempt)?s:null),J(null!=(i=r.bestAttempt)?i:null))},[t]);let eo=()=>{(0,p.gX)(),D(l()(x.c).slice(0,9)),T(0),P(0),F(null),w("playing"),Y(null),et.current=Date.now()},es=(0,o.useCallback)(async()=>{w("game-over");let t=I>_;t&&E(I);let o={score:I,isNewHighScore:t,highScore:t?I:_};if(V(o),Y(o),ee("last"),null==e?void 0:e.uid){await (0,u.o)({userId:e.uid,gameId:"credit-swipe",summaryData:o});let s=await (0,d.E)({userId:e.uid,gameId:"credit-swipe",score:I});s.success?g({xp:s.xpAwarded,cents:s.centsAwarded}):f({variant:"default",title:"No Reward This Time",description:s.message});let i=[(0,m.r)({userId:e.uid,actionType:"play_minigame_round"})];t&&i.push((0,m.r)({userId:e.uid,actionType:"beat_high_score"})),await Promise.all(i);let r=await (null==a?void 0:a());(null==r?void 0:r.leveledUp)&&r.newLevel&&r.rewardCents&&n({newLevel:r.newLevel,reward:r.rewardCents})}},[I,_,e,a,n,g,f]),ei=(0,o.useCallback)(()=>{ea.set(0),L<R.length-1?(T(e=>e+1),et.current=Date.now()):es()},[L,R.length,es,ea]),er=(e,t,a)=>{var o;let s=a,i=t,r=(Date.now()-(null!=(o=et.current)?o:Date.now()))/1e3;e&&r<5&&(s+=25,i+=" Speed Bonus! +25"),P(e=>Math.max(0,e+s)),F({type:e?"correct":"incorrect",message:i}),e?(0,p.SX)():(0,p.zD)(),setTimeout(()=>{F(null),ei()},1500)},en=(0,o.useCallback)(e=>{if("playing"!==y||z)return;let t=R[L];"right"===e?"Approve"===t.decision?er(!0,"Correct! This applicant is a good risk.",150):er(!1,"Incorrect. This applicant has too many red flags.",-75):(B(t),w("awaiting-reason"))},[y,R,L,er,z]);if("game-over"===y&&$)return(0,S.jsxs)(v.Zp,{className:"bg-card/50 backdrop-blur-lg border-border/20 text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{className:"text-3xl font-bold",children:"Game Over!"}),(0,S.jsx)(v.BT,{className:"text-lg",children:"Here's your final score:"})]}),(0,S.jsxs)(v.Wu,{className:"space-y-6",children:[$.isNewHighScore&&"last"===K&&(0,S.jsx)(i.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},className:"text-2xl font-bold text-yellow-400 p-3 bg-yellow-400/10 rounded-lg",children:"\uD83C\uDF89 New High Score! \uD83C\uDF89"}),(0,S.jsx)("div",{className:"text-6xl font-black text-primary",children:$.score}),(0,S.jsxs)("p",{className:"text-muted-foreground",children:["Your previous high score was ",_,"."]}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[(0,S.jsx)(C.$,{size:"lg",className:"text-lg shadow-glow",onClick:eo,children:"Play Again"}),(0,S.jsx)(C.$,{size:"lg",variant:"outline",className:"text-lg",onClick:()=>{w("start"),Y(null),ee(null)},children:"Close Report"})]})]})]});if("start"===y)return(0,S.jsxs)(v.Zp,{className:"bg-card/50 backdrop-blur-lg border-border/20 text-center",children:[(0,S.jsxs)(v.aR,{children:[(0,S.jsx)(v.ZB,{className:"text-3xl font-bold flex items-center justify-center gap-2",children:"Credit Swipe"}),(0,S.jsx)(v.BT,{className:"text-lg",children:"Can you make the right call? Swipe left to deny, right to approve."})]}),(0,S.jsxs)(v.Wu,{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"space-y-4 text-left p-4 bg-background/50 rounded-lg",children:[(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(j.A,{className:"w-6 h-6 text-green-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Approve Correctly:"})," +150 points"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(b.A,{className:"w-6 h-6 text-red-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Deny Correctly (with right reason):"})," +150 points"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(k.A,{className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"Speed Bonus:"})," +25 points (correct decision in under 5s)"]})]}),(0,S.jsxs)("div",{className:"flex items-start gap-3",children:[(0,S.jsx)(M.A,{className:"w-6 h-6 text-yellow-400 flex-shrink-0 mt-1"}),(0,S.jsxs)("p",{children:[(0,S.jsx)("b",{children:"High Score:"})," ",_," points"]})]}),(0,S.jsx)(X,{})]}),(0,S.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,S.jsx)(C.$,{size:"lg",className:"w-full text-xl font-bold shadow-glow",onClick:eo,children:"Start Game"}),Q&&(0,S.jsxs)(C.$,{size:"lg",variant:"secondary",className:"w-full text-xl font-bold",onClick:()=>{Q&&(Y(Q),w("game-over"),ee("last"))},children:[(0,S.jsx)(O.A,{className:"mr-2"})," View Last Report"]})]})]})]});let el={initial:{opacity:0,x:0},animate:e=>({opacity:[0,.7,0],x:[0,5*e,10*e],transition:{delay:.1*e,duration:1.5,repeat:1/0,repeatType:"loop",ease:"easeInOut"}})},ec=R.length>0?(L+1)/R.length*100:0;return(0,S.jsxs)("div",{className:"w-full h-[700px] flex flex-col items-center justify-center relative",children:[(0,S.jsxs)("div",{className:"w-full max-w-sm mb-4",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,S.jsx)("span",{className:"text-sm font-semibold text-muted-foreground",children:"Progress"}),(0,S.jsxs)("span",{className:"text-sm font-bold text-foreground",children:["Applicant ",L+1," of ",R.length]})]}),(0,S.jsx)(Z.k,{value:ec,className:"h-3"})]}),(0,S.jsxs)("div",{className:"w-full h-[550px] flex items-center justify-center relative",children:[(0,S.jsx)("div",{className:"absolute left-0 flex items-center h-full pr-4 text-red-500/80",children:[0,1,2].map(e=>(0,S.jsx)(i.P.div,{custom:-1,variants:el,initial:"initial",animate:"animate",children:(0,S.jsx)(U.A,{className:"w-12 h-12"})},e))}),(0,S.jsx)("div",{className:"absolute right-0 flex items-center h-full pl-4 text-green-500/80",children:[0,1,2].map(e=>(0,S.jsx)(i.P.div,{custom:1,variants:el,initial:"initial",animate:"animate",children:(0,S.jsx)(q.A,{className:"w-12 h-12"})},e))}),(0,S.jsx)(r.N,{children:R.length>0&&L<R.length&&(0,S.jsx)(N,{applicant:R[L],onSwipe:en,x:ea},R[L].id)})]}),(0,S.jsx)(r.N,{children:z&&(0,S.jsx)(H,{type:z.type,message:z.message})}),G&&(0,S.jsx)(A,{isOpen:"awaiting-reason"===y,reasons:G.rejectionReasons,onSelectReason:e=>{if(!G)return;let t=!1,a="",o=0;"Deny"===G.decision?e===G.correctRejectionReason?(t=!0,a="Correct! You spotted the main issue.",o=150):(t=!0,a="Good instinct, but the bigger issue was ".concat(G.correctRejectionReason.toLowerCase(),"."),o=25):(t=!1,a="Incorrect. This was a strong applicant who should have been approved.",o=-50),w("playing"),B(null),er(t,a,o)},onClose:()=>{w("playing"),B(null),ei()}})]})}},59191:(e,t,a)=>{a.d(t,{db:()=>l,j2:()=>n});var o=a(63892),s=a(98821),i=a(66446);let r=(0,o.Dk)().length?(0,o.Sx)():(0,o.Wp)({apiKey:"AIzaSyC8srmAJeGI69aQUDs0SoAe-350lnk17W4",authDomain:"centsable-2rix4.firebaseapp.com",projectId:"centsable-2rix4",storageBucket:"centsable-2rix4.firebasestorage.app",messagingSenderId:"954020441205",appId:"1:954020441205:web:84e2bc4684b2e87485dc3c",measurementId:"G-XS8FHQ20X4"}),n=(0,s.xI)(r),l=(0,i.aU)(r)},60190:(e,t,a)=>{a.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>r,aR:()=>n,wL:()=>m});var o=a(12115),s=a(64827),i=a(95155);let r=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...o})});r.displayName="Card";let n=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...o})});n.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...o})});c.displayName="CardDescription";let d=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...o})});d.displayName="CardContent";let m=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,i.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...o})});m.displayName="CardFooter"},63240:(e,t,a)=>{a.d(t,{dj:()=>u});var o=a(12115);let s=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=n(c,e),l.forEach(e=>{e(c)})}function m(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||o()}}}),{id:a,dismiss:o,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=o.useState(c);return o.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},64827:(e,t,a)=>{a.d(t,{cn:()=>i,w:()=>r});var o=a(35403),s=a(59055);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,o.$)(t))}function r(e){return null==e||isNaN(e)?"0":e<1e3?Math.floor(e).toString():e>=1e3&&e<1e6?(Math.floor(e/1e3*10)/10).toFixed(1)+"K":e>=1e6&&e<1e9?(Math.floor(e/1e6*10)/10).toFixed(1)+"M":e>=1e9?(Math.floor(e/1e9*10)/10).toFixed(1)+"B":e.toString()}},67471:(e,t,a)=>{a.d(t,{o:()=>s});var o=a(45320);let s=(0,o.createServerReference)("40b7e9a415d87b5a5afc643a31d07d4e5b2ecfccf5",o.callServer,void 0,o.findSourceMapURL,"saveGameSummary")},72417:(e,t,a)=>{a.d(t,{Z:()=>s,w:()=>o});let o=(()=>{let e=[{level:1,totalXPNeeded:0,rewardCents:0}],t=0,a=250,o=0;for(let s=2;s<=50;s++){let i=t+a,r=2===s?50:o+10;e.push({level:s,totalXPNeeded:Math.floor(i),rewardCents:r}),t=i,a*=1.15,o=r}return e})(),s=e=>{for(let t=o.length-1;t>=0;t--)if(e>=o[t].totalXPNeeded)return o[t].level;return 1}},74912:(e,t,a)=>{function o(e,t,a,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;if(!window.AudioContext)return;let i=new(window.AudioContext||window.webkitAudioContext),r=i.createOscillator(),n=i.createGain();r.type=e,r.frequency.setValueAtTime(t,i.currentTime),r.frequency.exponentialRampToValueAtTime(a,i.currentTime+.7*o),n.gain.setValueAtTime(s,i.currentTime),n.gain.exponentialRampToValueAtTime(.001,i.currentTime+o),r.connect(n),n.connect(i.destination),r.start(i.currentTime),r.stop(i.currentTime+o)}function s(){o("sine",600,900,.2)}function i(){o("sawtooth",200,100,.3)}function r(){o("triangle",440,440,.05,.2)}a.d(t,{SX:()=>s,gX:()=>r,zD:()=>i})},97809:(e,t,a)=>{a.d(t,{r:()=>s});var o=a(45320);let s=(0,o.createServerReference)("40702cf51aabae2501ebb5377f32e24190fb8c1bee",o.callServer,void 0,o.findSourceMapURL,"updateQuestProgress")}}]);